
## Цель: 
Знакомство с Hasura.io (v2) и сопутствующим инструментарием. Знакомство с [Hasura actions](https://hasura.io/docs/2.0/actions/overview/) и экосистемой вокруг PGsql.

## Задача
Создать апи каталога картинок. Я хочу иметь следующие сущьности:
- картинка
	  - содержит ссылку на картинку
	  - ссылку на автора
	  - дату добавления
	  - статус публикации
	  - список тегов связанных с картинкой (0 или более)
	  - какой коллекции относится картинка (всегда одна)
- тег
	- содержит название тега
- коллекция
	- содержит название коллекции
	- содержит список авторов
- авторы
	- содержит емейл
	- содержит роль доступа (автор\админ)

АПИ должно поддерживать **3 вида ролей пользователей**.
- Public: доступ без авторизации, доступен просмотр и поиск всех картинок
- Author: автор может добавлять новые картинки, а так же менять статус и теги картинок которые находятся в подконтрольных ему коллекциях
- Admin: может добавлять новые коллекции и новых авторов, а так же назначать авторов для коллекций

**Actions** необходимо реализовать на nodejs, желательно используя fastify, но можно и другой фреймворк взять. Необходимые кастомные АПИ: 
- **Авторизация**: эндпоинт для генерации токена с авторизацией (чтобы можно было тестить разные роли)
- **Загрузка картинки**: кроме метода добавления картинки мутацией (в виде вставки ссылки на картинку) так же необходимо сделать загрузку через actions. Можно загружать картинку к примеру на https://imgur.com/upload и поученную ссылку уже складывать в базу данных.

Проектирование структуры бд: необходимо написать запросы для выборки картинок по тегу или нескольких тегах, в одной или нескольких коллекциях. Поиск должен делаться средствами PG и Hasura.
Сделать запрос, который будет показывать автору в первую очередь его собственные картинки, потом картинки коллекций в которых он участвует, а потом уже все остальные картинки.

### Этапы:
- создать публичный репозиторий на github
- создать пустой проект hasura
- создать ветку с названием task, дальнейшая работа будет вестись в этой ветке. С нее должен быть сделать PR на мастер, в котором будет вестись ревью. 
- В ветке должен быть готовый docker-compose.yaml для запуска проекта локально с сидами.
- Опционально: собрать стейдж используя [hasura cloud](https://hasura.io/docs/2.0/cloud-ci-cd/index/) + [Neon](https://neon.tech/) ([instruction](https://hasura.io/docs/2.0/databases/postgres/neon/)) - оба продукта бесплатны на небольших объёмах.

### Критерии оценки
- минимальное использование внешних библиотек
- корректное использование TS (использование strict mode)
- минимальное количество кода для реализации задачи
- максимальное использование возможностей hasura и postgresql (создание вьюх со сложными запросами, параметризованные constraints на права доступа).
- максимальный перформанс получившегося DDL.
- наш проект содержит огромное количество логики на pl-sql, поэтому приветствуется любая демонстрация специфики pl-sql

### Артефакт
Должен быть PR, который не включает в себя скелет hasura app. Внутри PR должен быть выполненное задание + примеры запросов для демонстрации в ридми или отдельном файле.
