## Goal: описать шаги необходимые для развертывания atlassian stack

### 1. Регистриуем аккаунт холдер
Для начала нам необходим аккаунт, на который будет зарегистрирован CF/Fly. Если у нас есть GSuite, то оптимально использовать функционал групп.

Gsuite groups позволяют делать групповые ящики, которые не занимают лицензии gsuite (то есть бесплатны) и переадресуют почту сразу на несколько ящиков.

Стандартный формат:
- cloudflare-service@work-domain.com
- fly-service@work-domain.com
- ovh-service@work-domain.com
- mailgun-service@work-domain.com
- имяСервиса-service@work-domain.com
никакие сервисы на личные ящики людей мы не регистрируем никогда.

В группу получателей сервисных аккаунтов просьба добавить dev@nodeart.io

Для начала нам нужен аккаунт для CloudFlare и аккаунт для fly.io и аккаунт для github.

Важно: все аккаунты обязательно должны иметь 2fa. Для хранения 2fa используется bit.

Артефакт:
доступы к аккаунту CloudFlare, доступ к аккаунту fly.io, доступа к аккаунту github, почта для регистрации в ovh

### 2. Добаляем домен
В CloudFlare необходимо добавить домен, на котрором далее будут размещены все сервисы. 

Важно: домен необходимо покупать не в CloudFlare. Управление доменом и владение доменом обязательно должны быть разделены. К примеру можно купить домен на namecheap.com

Важно: домен необходимо покупать в зоне с поддержкой dnssec, к примеру .com  После добавления домена в CF необходимо активировать DNSSEC.

### 3. BIT
Мы создаем гитхаб репозиторий в привязанном аккаунте, в нем делаем конфиг для публикации bitwarden на fly.io, и привязываем к fly.io домен (bit.workdomain.com). На этом этапе мы привязываем mailgun к bit для оптарвки писем с пригашениями. Созадем в bit базовые группы досутпа и выдаем приглашения людям.

### 4. Регистрируем аккаунт хостинга
Мы используем сервера предоставляемые сервисом ovh.com.

Этот сервис глобальный, поэтому у них есть региональные версии. Нам важно зарегистрироваться в ЕВРОПЕЙСКОЙ части сервиса, потому что мы хотим взять сервер в европе (а не канаде к примеру).

Для этого при регистрации необходимо использовать ссылку [ovh.io](https://ovh.io) и выбрать европейскую страну при регистрации (ирландия к примеру, украины в списке нет).

#### VAT
Мы как украинцы освобождены от уплаты НДС (VAT). Убрать НДС на аккаунте OVH можно только ДО первой покупки. Для этого необходимо ОБЯЗАТЕЛЬНО при регистрации выбрать что регистрируем аккаунт как компания (не физ лицо)

VAT отключается через запрос в саппорт. Письмо пишем примерно следующий формы:

> I'm a Ukrainian sole entrepreneur, unfortunately Ukraine is not part of EU now, but because of that I don't have to pay VAT in EU. Could you please remove VAT from my account at OVH?

И приложить переведенную на английский форму выписки из ЕДР о регистрации ФОП (чатгпт успешно переводит и выдает PDF)


### 4. Покупаем сервер
После отмены VAT заказываем сервер. Сервер состоит из двух частей - отдельно сначала сервер, потом ип адерса к нему.

### 5. Настраиваем сервер
На сервере устанавливается host virtualization (hyperv) и создается 3 вирутальные машины для поднятия swarm кластера


### 6. Настраиваем сервисы
Настраиваем portainer, grafana, loki для инфраструктуры.
Настраиваем crowd, jira, wiki.

### 7. Настраиваем схемы процессов и плагины
