## Проблема
Для того чтобы эффективно закупать рекламу и оценивать эффективность источников трафика необходимо как можно раньше понимать насколько окупится трафик. Для этого важно свести воедино: 
- источники трафика (данные из партнерки)
- поведение пользователя на сайте
- окупаемость пользователя — депозиты (данные платформы)
Задача не выглядит сложно, но на самом деле из-за наличия большого количества зеркал, лендингов и т.п. у большинства продуктов отсутствует простроенная воронка. Выходит что данные как бы есть, но свести их воедино нет возможности.

## Решение
Если у партнерки есть API для экспорта данных, то мы успешно можем сложить данные в DataWarehouse для дальнейшего анализа. Если у партнерки нет такой опции, то мы все равно можем получить данные в разрезе партнера на следующем этапе (в браузере клиента), но уже с большей погрешностью.
Сбор дынных в единое хранилище данных со всех лендингов и зеркал осуществляется при помощи приложения PostHog, которое можно установить на ваш собственный сервер и привязать к любым доменам. Фактически это SelfHosted Google Analitics, без ограничений по идентификации пользователя.
Получение данных с платформы обычно доступно в том или ином виде, для части платформ (к примеру SoftSwiss) у нас есть уже готовые решения. Желательно иметь информацию о депозитах игрока (как успешных, так и нет), ставках игрока (в разрезе игр и провайдеров), отправленных игроку емейлах.

Таким образом итоговое решение выглядит так:
Создается DataWarehouse, общее хранилище данных для хранения данных из всех источников. Обычно это либо Google Big Query (Cloud решение), либо ClickHouse (selfhosted решение).
В этот DataWarehouse складываются данные по всем трем основным направлениям, обязательно в разрезе UserID.
Таким образом мы видим из какого источника пришел пользователь. Так же далее видим его перемещения по продукту. Как часто и как долго он взаимодействовал с продуктом. Далее видим какие депозиты он совершил их данных полученных от платформы.
Сама по себе эта информация не несет большой пользы, но при накоплении определенного массива информации — появляется возможность оперировать уже bigdata и ml подходами. К примеру имея срез поведения пользователей с определенного источника трафика, мы можем делать prediction (предсказание) LTW пользователей из этого источника. Таким образом мы можем ускорить принятие решения по закупке дорогого CPA трафика.
Или к примеру имея срез трафика по партнеру, мы можем отследить когда он начал подмешивать нам ботов или мотив, т.к. их поведение будет отличаться от обычных пользователей.

### GDPR
Поскольку все данные собираются и сохраняются на своих собсвенных серверах, нет необходимости в Google Analytics, Google Tag Manager etc. А значит и история с GDPR становится намного менее болезненной.